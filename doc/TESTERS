HOW TO TEST PEAR DB

$Id$


INTRODUCTION
============

These are instructions for testing PEAR DB on a Windows machine using a
Cygwin Bash shell.  Adjust the paths and commands to match your system.
This configuration is used because these precise steps are known to work.

NOTE:  You must log on as a user which has permissions to modify the
contents of your PHP executable's directory.  This is necessary for both
configuring AND running the test system.


INSTALLATION
============

Obtain PHP's Test Framework
---------------------------
If you don't have PHP's test framework, you need to obtain it.  These
steps include changing the working directory, downloading run-tests.php
via CVS and copying the file into place.  Change the revision flag in the
CVS command as appropriate for your present version of PHP.

 cd c:/progra~1/php
 cvs -d :pserver:cvsread@cvs.php.net:/repository login   # password is phpfi
 cvs -d :pserver:cvsread@cvs.php.net:/repository co -r PHP_4_3 \
     -d test php-src/run-tests.php
 cp test/run-tests.php .

Obtain DB's Test Framework
--------------------------
Create a location to store the test scripts and your notes.  A location
separate from your CVS working directory for DB is desirable because
you don't want to inadvertently commit a file with your passwords in it.
Then obtain the test suite via CVS.

 mkdir c:/dbtests
 cd c:/dbtests
 cvs -d :pserver:cvsread@cvs.php.net:/repository co -d tests pear/DB/tests

Copy and Edit DSN's
-------------------
setup.inc contains the DSN's for connecting to your test databases.
Creating a copy of it is helpful in case you download an updated version
of the test suite.  Make sure only one line is uncommented at a time.

 cp tests/driver/setup.inc .
 vi setup.inc &
 cp setup.inc tests/driver

Edit Paths and File Names in the Starter Script
-----------------------------------------------
There are two shell scripts named "run" used to jump start the testing
process.  One is in the tests directory and the other is in the
tests/driver directory.  These files contain the commands necessary to
run the tests on your system.  Since each computer system's settings
are different, you will need to edit that file.  Instructions for that
are contained in the "run" files themselves.


RUN THE TESTS
=============

 cd tests/driver
 ./run

To run one test: ./run <test name>.phpt
Example:         ./run db_parsedsn.phpt

Test Types and Locations
------------------------
tests             Common PEAR DB tests
tests/driver      Common tests for all the drivers
tests/<backend>   Specific backend tests (old tests, don't used them)

Results and What To Do With Them
--------------------------------
Each test that fails generates a .php (which you can execute), a .exp
(the expected output), a .out (the test output) and a .diff (a diff -u
from the .exp and .out files).

If you run the tests, please report or fill the TEST CONFORMANCE table
in the STATUS document.  Before any commit to CVS be sure to run the
tests and nothing got broken with the change.

If you get the message "SKIP", means that the test it's not executed.
Look at the DB/tests/driver/skipif.inc to see what's the problem
(probably a connection problem).


DB TESTER MATRIX
================
                            fbsql    ifx    mssql   mysql4   odbc   sybase
TESTER                        | ibase |  msql | mysql | oci8  | pgsql | sqlite
John Horton                   -   -   X   -   -   -   -   -   -   -   -   -
Tim Zickus                    -   -   -   -   -   -   -   X   -   -   -   -
Tim Parkin                    -   -   -   -   -   -   -   X   -   -   -   -
Paul Gardiner                 -   -   X   -   -   -   -   -   -   -   -   -
peterwb@iafrica.com           -   -   X   -   -   -   -   -   -   -   -   -
Daniel, Adam                  -   -   -   -   -   -   -   X   -   -   -   -
szii@sziisoft.com             -   -   -   -   -   -   -   -   X¹  -   -   -
jmh3@linuxfreak.com           -   -   -   -   -   -   -   -   -   X   -   -
Kevin Henrikson               -   -   -   -   -   -   -   X   -   -   -   -
Stig Bakken                   -   -   -   -   -   X   -   -   -   X   -   -
Chuck Hagenbuch               -   -   -   -   X   -   -   -   -   -   -   -
Ludovico Magnocavallo         -   X   -   -   -   -   -   -   -   -   -   -
Daniel Convissor              -   X   -   -   X   X   -   X   X²  X   X   X

MISSING TESTERS               X   -   -   X   -   -   X   -   -   -   -   -

Comments:

[1]: ODBC using IBM DB2
[2]: ODBC using IBM DB2 and MS Access
